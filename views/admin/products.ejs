<%- include('../_layouts/adminheader') %>


<h2 class="page-title mt-3">Products</h2>
<a href="/admin/products/add-product" class="btn btn-primary">Add a new product</a>
<br><br>

<% if (count > 0) { %>
<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">Product</th>
      <th scope="col">Price</th>
      <th scope="col">Category</th>
      <th scope="col">Product Image</th>
      <th scope="col">Edit</th>
      <th scope="col">Delete</th>
    </tr>
  </thead>
  <tbody>
    <% products.forEach(product => { %>
      <tr>
        <td><%= product.title %></td>
        <td><%= parseFloat(product.price).toFixed(2) %></td>
        <td><%= product.category %></td>
        <td>
          <% if (product.image == "") { %>
            <img src="/images/noimage.png" alt="">
          <% } else { %>
            <img src="/product_images/<%= product._id %>/<%= product.image %>" alt="">
          <% } %>
        </td>
        <td><a href="/admin/products/edit-product/<%= product._id %>">Edit</a></td>                
        <td><a class="confirmDeletion" href="/admin/products/delete-product/<%= product._id %>">Delete</a></td>
      </tr>
    <% });%>
  </tbody>
</table>
<% } else { %>
  <h3 class="text-center">There are no products.</h3>
<% } %>

<%- include('../_layouts/adminfooter') %>